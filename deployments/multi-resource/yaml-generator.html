<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Resources YAML Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 30px;
        }
        
        .form-section {
            overflow-y: auto;
            max-height: 70vh;
            padding-right: 10px;
        }
        
        .output-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            position: relative;
        }
        
        .section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .section h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section h3 {
            color: #764ba2;
            margin-top: 15px;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 500;
            font-size: 0.9em;
        }
        
        input[type="text"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 0.95em;
            transition: border-color 0.3s;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .resource-item {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .resource-item.disabled {
            opacity: 0.6;
            background: #f5f5f5;
        }
        
        .resource-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        .btn-small {
            padding: 5px 10px;
            font-size: 0.85em;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        #yamlOutput {
            background: #2d3748;
            color: #68d391;
            padding: 20px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            max-height: 60vh;
            overflow-y: auto;
            line-height: 1.5;
        }
        
        .help-text {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            display: none;
            z-index: 1000;
        }
        
        .toast.show {
            display: block;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .tag-input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .tag-input-container input {
            flex: 1;
        }
        
        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
            
            .output-section {
                max-height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ AWS Resources YAML Generator</h1>
            <p>Easy point-and-click interface to create your resources.yaml file</p>
        </div>
        
        <div class="content">
            <!-- Form Section -->
            <div class="form-section">
                <!-- Common Configuration -->
                <div class="section">
                    <h2>üåç Common Configuration</h2>
                    
                    <div class="form-group">
                        <label>AWS Region *</label>
                        <select id="region">
                            <option value="us-east-1">US East (N. Virginia) - us-east-1</option>
                            <option value="us-east-2">US East (Ohio) - us-east-2</option>
                            <option value="us-west-1">US West (N. California) - us-west-1</option>
                            <option value="us-west-2">US West (Oregon) - us-west-2</option>
                            <option value="eu-west-1">EU (Ireland) - eu-west-1</option>
                            <option value="eu-central-1">EU (Frankfurt) - eu-central-1</option>
                            <option value="ap-south-1">Asia Pacific (Mumbai) - ap-south-1</option>
                            <option value="ap-southeast-1">Asia Pacific (Singapore) - ap-southeast-1</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>VPC ID *</label>
                        <input type="text" id="vpcId" placeholder="vpc-0123456789abcdef0">
                        <div class="help-text">Your AWS VPC identifier</div>
                    </div>
                    
                    <div class="form-group">
                        <label>Environment *</label>
                        <select id="environment">
                            <option value="dev">Development</option>
                            <option value="staging">Staging</option>
                            <option value="prod">Production</option>
                            <option value="qa">QA/Testing</option>
                        </select>
                    </div>
                    
                    <h3>Common Tags</h3>
                    <div id="commonTagsContainer"></div>
                    <button class="btn btn-secondary btn-small" onclick="addCommonTag()">+ Add Tag</button>
                </div>
                
                <!-- EC2 Instances -->
                <div class="section">
                    <h2>üíª EC2 Instances</h2>
                    <div id="ec2Container"></div>
                    <button class="btn btn-primary btn-small" onclick="addEC2Instance()">+ Add EC2 Instance</button>
                </div>
                
                <!-- RDS Databases -->
                <div class="section">
                    <h2>üóÑÔ∏è RDS Databases</h2>
                    <div id="rdsContainer"></div>
                    <button class="btn btn-primary btn-small" onclick="addRDSInstance()">+ Add RDS Database</button>
                </div>
                
                <!-- Load Balancers -->
                <div class="section">
                    <h2>‚öñÔ∏è Load Balancers</h2>
                    <div id="albContainer"></div>
                    <button class="btn btn-primary btn-small" onclick="addALB()">+ Add Load Balancer</button>
                </div>
                
                <!-- Action Buttons -->
                <div class="button-group">
                    <button class="btn btn-success" onclick="generateYAML()">üìù Generate YAML</button>
                    <button class="btn btn-primary" onclick="downloadYAML()">üíæ Download File</button>
                    <button class="btn btn-secondary" onclick="copyToClipboard()">üìã Copy to Clipboard</button>
                </div>
            </div>
            
            <!-- Output Section -->
            <div class="output-section">
                <h2 style="margin-bottom: 15px;">üìÑ Generated YAML</h2>
                <pre id="yamlOutput"># Click "Generate YAML" to see your configuration here...</pre>
            </div>
        </div>
    </div>
    
    <div class="toast" id="toast">Action completed successfully!</div>
    
    <script>
        let ec2Counter = 0;
        let rdsCounter = 0;
        let albCounter = 0;
        let commonTagCounter = 0;
        
        // Initialize with one common tag
        window.onload = function() {
            addCommonTag();
            generateYAML(); // Show initial YAML
        };
        
        function addCommonTag() {
            const container = document.getElementById('commonTagsContainer');
            const tagId = commonTagCounter++;
            
            const div = document.createElement('div');
            div.className = 'tag-input-container';
            div.innerHTML = `
                <input type="text" placeholder="Key (e.g., department)" id="commonTagKey${tagId}">
                <input type="text" placeholder="Value (e.g., Engineering)" id="commonTagValue${tagId}">
                <button class="btn btn-secondary btn-small" onclick="this.parentElement.remove()">√ó</button>
            `;
            container.appendChild(div);
        }
        
        function addEC2Instance() {
            const container = document.getElementById('ec2Container');
            const id = ec2Counter++;
            
            const div = document.createElement('div');
            div.className = 'resource-item';
            div.id = `ec2-${id}`;
            div.innerHTML = `
                <div class="resource-header">
                    <h3>EC2 Instance #${id + 1}</h3>
                    <button class="btn btn-secondary btn-small" onclick="this.closest('.resource-item').remove()">Remove</button>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="ec2Enabled${id}" checked onchange="toggleResource('ec2-${id}', this.checked)">
                    <label for="ec2Enabled${id}">Enabled</label>
                </div>
                
                <div class="form-group">
                    <label>Instance Key *</label>
                    <input type="text" id="ec2Key${id}" placeholder="web-server-01" value="ec2-instance-${id + 1}">
                    <div class="help-text">Unique identifier for this instance</div>
                </div>
                
                <div class="form-group">
                    <label>Instance Name *</label>
                    <input type="text" id="ec2Name${id}" placeholder="web-server-01">
                </div>
                
                <div class="form-group">
                    <label>AMI ID *</label>
                    <input type="text" id="ec2AMI${id}" placeholder="ami-0123456789abcdef0">
                </div>
                
                <div class="form-group">
                    <label>Instance Type *</label>
                    <select id="ec2Type${id}">
                        <option value="t3.micro">t3.micro (2 vCPU, 1 GB RAM)</option>
                        <option value="t3.small">t3.small (2 vCPU, 2 GB RAM)</option>
                        <option value="t3.medium">t3.medium (2 vCPU, 4 GB RAM)</option>
                        <option value="t3.large">t3.large (2 vCPU, 8 GB RAM)</option>
                        <option value="m5.large">m5.large (2 vCPU, 8 GB RAM)</option>
                        <option value="m5.xlarge">m5.xlarge (4 vCPU, 16 GB RAM)</option>
                        <option value="c5.large">c5.large (2 vCPU, 4 GB RAM)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Subnet ID *</label>
                    <input type="text" id="ec2Subnet${id}" placeholder="subnet-0123456789abcdef0">
                </div>
                
                <div class="form-group">
                    <label>Key Pair Name</label>
                    <input type="text" id="ec2KeyName${id}" placeholder="my-key-pair">
                </div>
                
                <div class="form-group">
                    <label>OS Type *</label>
                    <select id="ec2OS${id}">
                        <option value="linux">Linux</option>
                        <option value="windows">Windows</option>
                    </select>
                </div>
            `;
            container.appendChild(div);
        }
        
        function addRDSInstance() {
            const container = document.getElementById('rdsContainer');
            const id = rdsCounter++;
            
            const div = document.createElement('div');
            div.className = 'resource-item';
            div.id = `rds-${id}`;
            div.innerHTML = `
                <div class="resource-header">
                    <h3>RDS Database #${id + 1}</h3>
                    <button class="btn btn-secondary btn-small" onclick="this.closest('.resource-item').remove()">Remove</button>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="rdsEnabled${id}" checked onchange="toggleResource('rds-${id}', this.checked)">
                    <label for="rdsEnabled${id}">Enabled</label>
                </div>
                
                <div class="form-group">
                    <label>Database Key *</label>
                    <input type="text" id="rdsKey${id}" placeholder="app-db" value="rds-db-${id + 1}">
                </div>
                
                <div class="form-group">
                    <label>DB Identifier *</label>
                    <input type="text" id="rdsIdentifier${id}" placeholder="my-app-db">
                </div>
                
                <div class="form-group">
                    <label>Engine *</label>
                    <select id="rdsEngine${id}">
                        <option value="mysql">MySQL</option>
                        <option value="postgres">PostgreSQL</option>
                        <option value="sqlserver-ex">SQL Server Express</option>
                        <option value="mariadb">MariaDB</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Engine Version</label>
                    <input type="text" id="rdsVersion${id}" placeholder="8.0" value="8.0">
                </div>
                
                <div class="form-group">
                    <label>Instance Class *</label>
                    <select id="rdsClass${id}">
                        <option value="db.t3.micro">db.t3.micro (1 vCPU, 1 GB RAM)</option>
                        <option value="db.t3.small">db.t3.small (1 vCPU, 2 GB RAM)</option>
                        <option value="db.t3.medium">db.t3.medium (2 vCPU, 4 GB RAM)</option>
                        <option value="db.m5.large">db.m5.large (2 vCPU, 8 GB RAM)</option>
                        <option value="db.r5.large">db.r5.large (2 vCPU, 16 GB RAM)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Allocated Storage (GB) *</label>
                    <input type="number" id="rdsStorage${id}" placeholder="20" value="20">
                </div>
                
                <div class="form-group">
                    <label>DB Username *</label>
                    <input type="text" id="rdsUsername${id}" placeholder="admin" value="admin">
                </div>
                
                <div class="form-group">
                    <label>Subnet IDs (comma-separated) *</label>
                    <input type="text" id="rdsSubnets${id}" placeholder="subnet-xxx, subnet-yyy">
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="rdsMultiAZ${id}">
                    <label for="rdsMultiAZ${id}">Multi-AZ Deployment</label>
                </div>
            `;
            container.appendChild(div);
        }
        
        function addALB() {
            const container = document.getElementById('albContainer');
            const id = albCounter++;
            
            const div = document.createElement('div');
            div.className = 'resource-item';
            div.id = `alb-${id}`;
            div.innerHTML = `
                <div class="resource-header">
                    <h3>Load Balancer #${id + 1}</h3>
                    <button class="btn btn-secondary btn-small" onclick="this.closest('.resource-item').remove()">Remove</button>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="albEnabled${id}" checked onchange="toggleResource('alb-${id}', this.checked)">
                    <label for="albEnabled${id}">Enabled</label>
                </div>
                
                <div class="form-group">
                    <label>Load Balancer Key *</label>
                    <input type="text" id="albKey${id}" placeholder="web-alb" value="alb-${id + 1}">
                </div>
                
                <div class="form-group">
                    <label>Name *</label>
                    <input type="text" id="albName${id}" placeholder="web-tier-alb">
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="albInternal${id}">
                    <label for="albInternal${id}">Internal Load Balancer</label>
                </div>
                
                <div class="form-group">
                    <label>Subnet IDs (comma-separated) *</label>
                    <input type="text" id="albSubnets${id}" placeholder="subnet-xxx, subnet-yyy">
                </div>
                
                <div class="form-group">
                    <label>Target Group Name *</label>
                    <input type="text" id="albTGName${id}" placeholder="web-tg">
                </div>
                
                <div class="form-group">
                    <label>Target Port *</label>
                    <input type="number" id="albTGPort${id}" placeholder="80" value="80">
                </div>
                
                <div class="form-group">
                    <label>Health Check Path</label>
                    <input type="text" id="albHealthPath${id}" placeholder="/health" value="/health">
                </div>
            `;
            container.appendChild(div);
        }
        
        function toggleResource(id, enabled) {
            const element = document.getElementById(id);
            if (enabled) {
                element.classList.remove('disabled');
            } else {
                element.classList.add('disabled');
            }
        }
        
        function generateYAML() {
            let yaml = '# Generated AWS Resources Configuration\n';
            yaml += '# Created: ' + new Date().toLocaleString() + '\n\n';
            
            // Common section
            yaml += 'common:\n';
            yaml += `  region: "${document.getElementById('region').value}"\n`;
            yaml += `  vpc_id: "${document.getElementById('vpcId').value}"\n`;
            yaml += `  environment: "${document.getElementById('environment').value}"\n`;
            
            // Common tags
            const commonTags = getCommonTags();
            if (Object.keys(commonTags).length > 0) {
                yaml += '  common_tags:\n';
                for (const [key, value] of Object.entries(commonTags)) {
                    yaml += `    ${key}: "${value}"\n`;
                }
            }
            
            // EC2 Instances
            yaml += '\nec2_instances:\n';
            const ec2Items = document.querySelectorAll('#ec2Container .resource-item');
            if (ec2Items.length === 0) {
                yaml += '  # No EC2 instances configured\n';
            } else {
                ec2Items.forEach((item, index) => {
                    const id = item.id.split('-')[1];
                    const key = document.getElementById(`ec2Key${id}`).value || `ec2-${index + 1}`;
                    const enabled = document.getElementById(`ec2Enabled${id}`).checked;
                    
                    yaml += `  ${key}:\n`;
                    yaml += `    enabled: ${enabled}\n`;
                    yaml += `    instance_name: "${document.getElementById(`ec2Name${id}`).value}"\n`;
                    yaml += `    ami_id: "${document.getElementById(`ec2AMI${id}`).value}"\n`;
                    yaml += `    instance_type: "${document.getElementById(`ec2Type${id}`).value}"\n`;
                    yaml += `    subnet_id: "${document.getElementById(`ec2Subnet${id}`).value}"\n`;
                    
                    const keyName = document.getElementById(`ec2KeyName${id}`).value;
                    if (keyName) {
                        yaml += `    key_name: "${keyName}"\n`;
                    }
                    
                    yaml += `    os_type: "${document.getElementById(`ec2OS${id}`).value}"\n`;
                    yaml += `    tags:\n`;
                    yaml += `      Name: "${document.getElementById(`ec2Name${id}`).value}"\n`;
                    yaml += '\n';
                });
            }
            
            // RDS Instances
            yaml += 'rds_instances:\n';
            const rdsItems = document.querySelectorAll('#rdsContainer .resource-item');
            if (rdsItems.length === 0) {
                yaml += '  # No RDS databases configured\n';
            } else {
                rdsItems.forEach((item, index) => {
                    const id = item.id.split('-')[1];
                    const key = document.getElementById(`rdsKey${id}`).value || `rds-${index + 1}`;
                    const enabled = document.getElementById(`rdsEnabled${id}`).checked;
                    
                    yaml += `  ${key}:\n`;
                    yaml += `    enabled: ${enabled}\n`;
                    yaml += `    identifier: "${document.getElementById(`rdsIdentifier${id}`).value}"\n`;
                    yaml += `    engine: "${document.getElementById(`rdsEngine${id}`).value}"\n`;
                    yaml += `    engine_version: "${document.getElementById(`rdsVersion${id}`).value}"\n`;
                    yaml += `    instance_class: "${document.getElementById(`rdsClass${id}`).value}"\n`;
                    yaml += `    allocated_storage: ${document.getElementById(`rdsStorage${id}`).value}\n`;
                    yaml += `    db_username: "${document.getElementById(`rdsUsername${id}`).value}"\n`;
                    
                    const subnets = document.getElementById(`rdsSubnets${id}`).value.split(',').map(s => s.trim());
                    yaml += `    db_subnet_ids:\n`;
                    subnets.forEach(subnet => {
                        if (subnet) yaml += `      - "${subnet}"\n`;
                    });
                    
                    yaml += `    multi_az: ${document.getElementById(`rdsMultiAZ${id}`).checked}\n`;
                    yaml += `    tags:\n`;
                    yaml += `      Name: "${document.getElementById(`rdsIdentifier${id}`).value}"\n`;
                    yaml += '\n';
                });
            }
            
            // Load Balancers
            yaml += 'load_balancers:\n';
            const albItems = document.querySelectorAll('#albContainer .resource-item');
            if (albItems.length === 0) {
                yaml += '  # No load balancers configured\n';
            } else {
                albItems.forEach((item, index) => {
                    const id = item.id.split('-')[1];
                    const key = document.getElementById(`albKey${id}`).value || `alb-${index + 1}`;
                    const enabled = document.getElementById(`albEnabled${id}`).checked;
                    
                    yaml += `  ${key}:\n`;
                    yaml += `    enabled: ${enabled}\n`;
                    yaml += `    name: "${document.getElementById(`albName${id}`).value}"\n`;
                    yaml += `    internal: ${document.getElementById(`albInternal${id}`).checked}\n`;
                    
                    const subnets = document.getElementById(`albSubnets${id}`).value.split(',').map(s => s.trim());
                    yaml += `    lb_subnets:\n`;
                    subnets.forEach(subnet => {
                        if (subnet) yaml += `      - "${subnet}"\n`;
                    });
                    
                    yaml += `    target_group:\n`;
                    yaml += `      name: "${document.getElementById(`albTGName${id}`).value}"\n`;
                    yaml += `      port: ${document.getElementById(`albTGPort${id}`).value}\n`;
                    yaml += `      protocol: "HTTP"\n`;
                    yaml += `      health_check:\n`;
                    yaml += `        path: "${document.getElementById(`albHealthPath${id}`).value}"\n`;
                    yaml += `    tags:\n`;
                    yaml += `      Name: "${document.getElementById(`albName${id}`).value}"\n`;
                    yaml += '\n';
                });
            }
            
            document.getElementById('yamlOutput').textContent = yaml;
        }
        
        function getCommonTags() {
            const tags = {};
            const container = document.getElementById('commonTagsContainer');
            const inputs = container.querySelectorAll('.tag-input-container');
            
            inputs.forEach(input => {
                const keyInput = input.querySelector('input[id^="commonTagKey"]');
                const valueInput = input.querySelector('input[id^="commonTagValue"]');
                
                if (keyInput && valueInput && keyInput.value && valueInput.value) {
                    tags[keyInput.value] = valueInput.value;
                }
            });
            
            return tags;
        }
        
        function downloadYAML() {
            generateYAML();
            const yaml = document.getElementById('yamlOutput').textContent;
            const blob = new Blob([yaml], { type: 'text/yaml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'resources.yaml';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('File downloaded successfully!');
        }
        
        function copyToClipboard() {
            generateYAML();
            const yaml = document.getElementById('yamlOutput').textContent;
            navigator.clipboard.writeText(yaml).then(() => {
                showToast('YAML copied to clipboard!');
            }).catch(err => {
                alert('Failed to copy to clipboard');
            });
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Auto-generate YAML on any input change
        document.addEventListener('input', generateYAML);
        document.addEventListener('change', generateYAML);
    </script>
</body>
</html>
